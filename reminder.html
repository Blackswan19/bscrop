<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>BsReminder</title> <link rel="icon" type="image/x-icon" href="https://i.ibb.co/WBcSJPd/New-Project-A1-A7313.png"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> <style> @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap'); * { color: #fff; font-family: "Red Hat Display", sans-serif; } body { background: #000; margin: 0; -webkit-tap-highlight-color: transparent; tap-highlight-color: transparent; } body { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .letsbecenter { display: flex; justify-content: center; align-items: center; } h2#monthAndYear { font-size: 50px; position: fixed; left: 37%; top: 15px;white-space:inherit } table {width: 60%; position: fixed; top: 26%; background: #ffffff12; border-radius: 18px; padding: 2px;} th, td { padding: 5px; text-align: center; color: white; width: 100px; height: 40px; border-radius: 16px; opacity: 80%; } th, td:hover { background: #ffffff44; color: #bbb; font-weight: 800; opacity: 100%;} th { background: #000; color: #d6d6d6; } .highlight { background: #ffffff1f; } .pinned { background: #ff8c008c; } .pinned:hover { background: #ff8c00af; } .goal { background: #1800ffa8; } .goal:hover { background: #1900ffd0; } .leftright { position: fixed; bottom: 100px; right: 6%; display: flex; gap: 30px; } .leftright button { background: transparent; border: none; font-size: 30px; color: #ffffff4c; } .leftright button:hover{ color: #fff; background-color: transparent; } .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); justify-content: center; align-items: center; z-index: 999; } .modal-content { background: #1b1b1b; padding: 10px; border-radius: 30px; width: 85%; text-align: center;max-width: 300px;} .close { position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; color: #aaa; } .close:hover { color: #0059ff; } input, button { width: -webkit-fill-available; padding: 12px; margin: 8px 0; border: none; border-radius: 6px; } input { background: #4d4d4d; color: #fff; } button { background: #0059ff; cursor: pointer; } button:hover { background: #0044cc; } .checkbox { display: flex; align-items: center; gap: 10px; margin: 15px 0; font-size: 15px; } .title-field { display: none; } .note-preview { font-size: 11px; margin-top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; } @media (max-width: 480px) { h2#monthAndYear {font-size: 32px; left: 20px; top: 20px; white-space: none; } table {width: 95%; position: fixed; top: 26%; border-radius: 16px;} .leftright { left: 0px; width: 100%; gap: 00px; bottom: 40px;} th, td { border-radius: 13px; } } </style> </head> <body> <p style="color:#0059ff;position:fixed;top:10px;left:20px;font-weight:600;">#BsReminder</p> <h2 id="monthAndYear"></h2> <div class="letsbecenter"> <table id="calendar"> <thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead> <tbody id="calendar-body"></tbody> </table> </div> <div class="leftright"> <button onclick="previous()">‹</button> <button onclick="next()">›</button> </div> <!-- SINGLE NOTE POPUP --> <div id="noteModal" class="modal"> <div class="modal-content"> <span class="close" onclick="closeModal()">×</span> <h3 id="modalDate"></h3> <div id="titleField" class="title-field"> <input type="text" id="noteTitle" placeholder="Title (e.g. Rent)" /> </div> <div class="checkbox"> <input style=" width: fit-content;" type="checkbox" id="pinForever"> <label for="pinForever">Pin to <b>every month</b> on this date</label> </div> <input type="text" id="noteText" placeholder="Full note..." /> <button onclick="saveNote()">Save Note</button> </div> </div> <!-- DISPLAY MODAL --> <div id="viewModal" class="modal"> <div class="modal-content"> <span class="close" onclick="closeModal()">×</span> <h3 id="viewTitle" style="color:#0040ff;"></h3> <p id="viewText" style="font-size:15px;"></p> <button onclick="editNote()" style=" border-radius: 100px; margin-bottom: 1px;">Edit</button> </div> </div>
<script>
    const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    let today = new Date();
    let currentMonth = today.getMonth();
    let currentYear = today.getFullYear();

    // Storage
    let oneTimeNotes = JSON.parse(localStorage.getItem('notes') || '{}');
    let pinnedNotes  = JSON.parse(localStorage.getItem('pinned') || '{}');

    let selectedDate = "";
    let selectedDay = 0;
    let isEditingPinned = false;

    // ——— CALENDAR ———
    function generateCalendar(m, y) {
        document.getElementById("monthAndYear").innerText = `${months[m]} ${y}`;
        let body = document.getElementById("calendar-body");
        body.innerHTML = "";
        let firstDay = new Date(y, m, 1).getDay();
        let days = new Date(y, m+1, 0).getDate();

        let date = 1;
        for (let i = 0; i < 6; i++) {
            let row = document.createElement("tr");
            for (let j = 0; j < 7; j++) {
                if (i === 0 && j < firstDay) {
                    row.appendChild(document.createElement("td"));
                } else if (date > days) {
                    break;
                } else {
                    let cell = document.createElement("td");
                    let full = `${y}-${String(m+1).padStart(2,'0')}-${String(date).padStart(2,'0')}`;
                    cell.dataset.date = full;
                    cell.style.cursor = "pointer";

                    // Today
                    if (date === today.getDate() && m === today.getMonth() && y === today.getFullYear())
                        cell.classList.add("highlight");

                    // Pinned
                    if (pinnedNotes[date]) {
                        cell.classList.add("pinned");
                        let titleDiv = document.createElement("div");
                        titleDiv.className = "note-preview";
                        titleDiv.textContent = pinnedNotes[date].title;
                        cell.appendChild(document.createTextNode(date));
                        cell.appendChild(titleDiv);
                    } else {
                        cell.appendChild(document.createTextNode(date));
                    }

                    // One-time
                    if (oneTimeNotes[full]) {
                        cell.classList.add("goal");
                        let prev = document.createElement("div");
                        prev.className = "note-preview";
                        prev.textContent = oneTimeNotes[full].substring(0,12)+(oneTimeNotes[full].length>12?"…":"");
                        cell.appendChild(prev);
                    }

                    row.appendChild(cell);
                    date++;
                }
            }
            body.appendChild(row);
        }
    }

    // ——— OPEN INPUT MODAL ———
    function openNoteModal(fullDate, day, isEdit = false) {
        selectedDate = fullDate;
        selectedDay = day;
        isEditingPinned = isEdit;

        document.getElementById("modalDate").textContent = isEdit ? "Edit Pinned Note" : "Note for " + fullDate;

        const pinned = pinnedNotes[day];
        const oneTime = oneTimeNotes[fullDate];

        if (pinned) {
            document.getElementById("pinForever").checked = true;
            document.getElementById("titleField").style.display = "block";
            document.getElementById("noteTitle").value = pinned.title;
            document.getElementById("noteText").value = pinned.note;
        } else {
            document.getElementById("pinForever").checked = false;
            document.getElementById("titleField").style.display = "none";
            document.getElementById("noteTitle").value = "";
            document.getElementById("noteText").value = oneTime || "";
        }

        document.getElementById("noteModal").style.display = "flex";
    }

    // ——— TITLE FIELD TOGGLE ———
    document.getElementById("pinForever").onchange = function() {
        const show = this.checked;
        document.getElementById("titleField").style.display = show ? "block" : "none";
        if (!show) document.getElementById("noteTitle").value = "";
    };

    // ——— SAVE NOTE ———
    function saveNote() {
        const text = document.getElementById("noteText").value.trim();
        const title = document.getElementById("noteTitle").value.trim();
        const forever = document.getElementById("pinForever").checked;

        if (forever) {
            if (!title || !text) {
                alert("Title & note required for pinned notes");
                return;
            }
            pinnedNotes[selectedDay] = { title, note: text };
            delete oneTimeNotes[selectedDate]; // remove conflict
        } else {
            if (text) {
                oneTimeNotes[selectedDate] = text;
            } else {
                delete oneTimeNotes[selectedDate];
            }
            delete pinnedNotes[selectedDay]; // remove pinned
        }

        localStorage.setItem('notes', JSON.stringify(oneTimeNotes));
        localStorage.setItem('pinned', JSON.stringify(pinnedNotes));
        closeModal();
        generateCalendar(currentMonth, currentYear); // Refresh
    }

    // ——— VIEW NOTE ———
    function viewNote(title, note) {
        document.getElementById("viewTitle").textContent = title;
        document.getElementById("viewText").textContent = note;
        document.getElementById("viewModal").style.display = "flex";
    }

    // ——— EDIT FROM VIEW ———
    function editNote() {
        closeModal();
        openNoteModal(selectedDate, selectedDay, true);
    }

    // ——— CELL CLICK ———
    document.addEventListener('click', e => {
        const cell = e.target.closest('td[data-date]');
        if (!cell) return;

        const date = cell.dataset.date;
        const day = parseInt(date.split('-')[2]);
        const pinned = pinnedNotes[day];
        const one = oneTimeNotes[date];

        selectedDate = date;
        selectedDay = day;

        if (pinned || one) {
            const t = pinned ? pinned.title : "Note";
            const n = pinned ? pinned.note : one;
            viewNote(t, n);
        } else {
            openNoteModal(date, day);
        }
    });

    function closeModal() {
        document.querySelectorAll('.modal').forEach(m => m.style.display = "none");
    }

    function previous() {
        currentMonth = currentMonth === 0 ? 11 : currentMonth - 1;
        currentYear = currentMonth === 11 ? currentYear - 1 : currentYear;
        generateCalendar(currentMonth, currentYear);
    }

    function next() {
        currentMonth = (currentMonth + 1) % 12;
        currentYear = currentMonth === 0 ? currentYear + 1 : currentYear;
        generateCalendar(currentMonth, currentYear);
    }

    window.onclick = e => { if (e.target.classList.contains('modal')) closeModal(); };

    // INIT
    generateCalendar(currentMonth, currentYear);
    document.addEventListener("DOMContentLoaded", () => {
            const customMenu = document.querySelector(".custom-menu");

            document.addEventListener("contextmenu", (event) => {
                event.preventDefault();
                if (customMenu) {
                    customMenu.style.display = "block";
                    customMenu.style.top = `${event.pageY}px`;
                    customMenu.style.left = `${event.pageX}px`;
                }
            });

            document.addEventListener("click", () => {
                if (customMenu) {
                    customMenu.style.display = "none";
                }
            });
        });
</script>
</body>
</html>

