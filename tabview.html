<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Mytv(Tabview)</title> <link rel="icon" type="image/x-icon" href="https://i.ibb.co/sd04n7n4/logo.png"> <style> @import url('https://fonts.googleapis.com/css2?family=Alata&family=Corinthia:wght@400;700&family=DM+Serif+Display:ital@0;1&family=Geologica:wght@100..900&family=Lavishly+Yours&family=League+Spartan&family=Merriweather+Sans:ital,wght@0,300..800;1,300..800&family=Mrs+Saint+Delafield&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Prompt:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap'); body { font-family: "League Spartan", serif; background-color: #1e1e1e; color: white; margin: 0; } * { -webkit-tap-highlight-color: transparent; } body { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } a { text-decoration: none; color: white; } .tab-container { display: flex; flex-direction: column; height: 100vh; } .tab-header { display: flex; background: #333; padding: 10px; overflow-x: auto; border-bottom: 2px solid #444; align-items: center; } .tab { background: #444; color: white; padding: 10px; margin-right: 5px; cursor: pointer; border-radius: 5px; text-transform: capitalize; white-space: nowrap; } .tab.active { background: #afafaf; } .add-tab { background: #555; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; } .tab-content { flex: 1; padding: 20px; overflow-y: auto; background: #2e2e2e; } .file { margin: 10px; position: relative; } .file-text { background: #444; padding: 10px; border-radius: 5px; color: white; cursor: pointer; } .context-menu { position: absolute; background: #333; color: white; display: none; border: 1px solid #555; z-index: 10; border-radius: 3px; } .context-menu button { display: block; background: #2e2e2e; color: #ffffff; border: none; padding: 10px; width: 100%; text-align: left; cursor: pointer; font-weight: 500; font-family: "League Spartan", serif; font-size: 15px; } .context-menu button:hover { background: #444; border-radius: 0px; } .fullscreen-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); justify-content: center; align-items: center; z-index: 100; } div button { padding: 10px; border: none; color: rgb(0, 0, 0); border-radius: 5px; font-family: "League Spartan", serif; cursor: pointer; } .fullscreen-modal img, .fullscreen-modal iframe { max-width: 90%; max-height: 90%; } .fullscreen-modal .close-modal { position: absolute; top: 20px; right: 20px; background: transparent; color: white; border: none; cursor: pointer; font-size: 35px; font-weight: 100; } textarea { width: 100%; min-height: 100px; background: #444; color: white; border: 1px solid #555; padding: 10px; font-family: "League Spartan", serif; font-size: 1.2em; } .search-container { display: flex; justify-content: center; align-items: center; margin: 10px 0; } .search-tab, .search-file { background: #444; color: white; padding: 8px; border: 1px solid #555; border-radius: 5px; font-family: "League Spartan", serif; margin-right: 5px; } .search-file { width: 300px; } .file-name-input { background: #444444; color: white; padding: 8px; border: 1px solid #555; border-radius: 6px 6px 0px 0px; font-family: "League Spartan", serif; font-size: 13px; display: flex ; width: fit-content; } .search-popup, .resize-popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #333; padding: 20px; border: 1px solid #555; border-radius: 5px; z-index: 200; } .search-popup label, .resize-popup label { display: block; margin: 10px 0; font-family: "League Spartan", serif; } .search-popup button, .resize-popup button { margin-top: 10px; background: #555; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer; } .search-popup button:hover, .resize-popup button:hover { background: #666; } .link-container { background: #444; padding: 10px; border-radius: 5px; margin: 10px 0; width: fit-content; } .link-container a { color: #1e90ff; text-decoration: underline; word-break: break-all; } .scroll-up { position: fixed; bottom: 48px; background: #f0f0f0; color: black; border: none; padding: 10px 45px 10px 10px; border-radius: 0px; cursor: pointer; margin-bottom: 10px; z-index: 10; right: -10px; } </style> </head> <body> <div class="tab-container"> <div class="search-container"> <input type="text" class="search-file" placeholder="Search file here..."> <button onclick="showSearchPopup()">Search</button> </div> <div class="tab-header"> <input type="text" class="search-tab" placeholder="Search tabs..."> <button class="add-tab">+</button> </div> <div class="tab-content"> <p>Select a tab or create a new one.!</p> </div> </div> <div id="contextMenu" class="context-menu"></div> <div id="fullscreenModal" class="fullscreen-modal"> <button class="close-modal">&times;</button> </div> <div id="searchPopup" class="search-popup"> <p>Search in:</p> <label><input type="radio" name="searchScope" value="current" checked> Current Tab</label> <label><input type="radio" name="searchScope" value="all"> All Tabs</label> <button onclick="searchFiles()">Confirm</button> <button onclick="document.getElementById('searchPopup').style.display='none'">Cancel</button> </div> <div id="linkPopup" class="search-popup"> <p>Add Link</p> <input type="text" id="linkTitle" placeholder="Enter link title" style="width: 96%; margin-bottom: 10px; padding: 8px;"> <input type="url" id="linkUrl" placeholder="Enter URL" style="width: 96%; margin-bottom: 10px; padding: 8px;"> <button onclick="saveLink()">Save</button> <button onclick="document.getElementById('linkPopup').style.display='none'">Cancel</button> </div> <div id="resizePopup" class="resize-popup"> <p>Resize Image</p> <input type="number" id="imageWidth" placeholder="Enter width (px)" style="width:96%; margin-bottom: 10px; padding: 8px;"> <button onclick="saveImageWidth(true)">Save for All</button> <button onclick="saveImageWidth(false)">Save for This Image</button> <button onclick="document.getElementById('resizePopup').style.display='none'">Cancel</button> </div> <button style="background: black; border: none; padding: 10px; position: fixed; bottom: 10px; right: 0px;"> <a href="https://blackswan19.github.io/Educate/filexplorer">File explorer</a> </button>
  <script>
    const tabHeader = document.querySelector('.tab-header');
    const tabContent = document.querySelector('.tab-content');
    const addTabButton = document.querySelector('.add-tab');
    const contextMenu = document.getElementById('contextMenu');
    const fullscreenModal = document.getElementById('fullscreenModal');
    const closeModalButton = fullscreenModal.querySelector('.close-modal');
    const searchTabInput = document.querySelector('.search-tab');
    const searchFileInput = document.querySelector('.search-file');
    const searchPopup = document.getElementById('searchPopup');
    const linkPopup = document.getElementById('linkPopup');
    const linkTitleInput = document.getElementById('linkTitle');
    const linkUrlInput = document.getElementById('linkUrl');
    const resizePopup = document.getElementById('resizePopup');
    const imageWidthInput = document.getElementById('imageWidth');
    let currentTabIndex = 0;
    let currentTabId = null;
    let currentImageTabId = null;
    let currentImageIndex = null;
    const tabsData = JSON.parse(localStorage.getItem('tabsData')) || {};
    let globalImageWidth = localStorage.getItem('globalImageWidth') || '60%';

    const saveTabsData = () => {
      localStorage.setItem('tabsData', JSON.stringify(tabsData));
    };

    const createFileElement = (file, tabId, fileIndex) => {
      const fileContainer = document.createElement('div');
      fileContainer.classList.add('file');
      fileContainer.dataset.fileName = file.name || `file-${fileIndex}`;

      if (file.type === 'image') {
        const nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.classList.add('file-name-input');
        nameInput.value = file.name || `image-${fileIndex}`;
        nameInput.addEventListener('input', () => {
          tabsData[tabId].files[fileIndex].name = nameInput.value.trim();
          fileContainer.dataset.fileName = nameInput.value.trim() || `file-${fileIndex}`;
          saveTabsData();
        });
        fileContainer.appendChild(nameInput);

        const img = document.createElement('img');
        img.src = file.content;
        img.style.width = file.width || globalImageWidth;
        img.style.height = 'auto';
        img.addEventListener('contextmenu', (e) => showFileContextMenu(e, file, tabId, fileIndex));
        fileContainer.appendChild(img);
      } else if (file.type === 'pdf') {
        const nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.classList.add('file-name-input');
        nameInput.value = file.name || `pdf-${fileIndex}`;
        nameInput.addEventListener('input', () => {
          tabsData[tabId].files[fileIndex].name = nameInput.value.trim();
          fileContainer.dataset.fileName = nameInput.value.trim() || `file-${fileIndex}`;
          saveTabsData();
        });
        fileContainer.appendChild(nameInput);

        const iframe = document.createElement('iframe');
        iframe.src = file.content;
        iframe.style.width = '100%';
        iframe.style.height = '100vh';
        iframe.addEventListener('contextmenu', (e) => showFileContextMenu(e, file, tabId, fileIndex));
        fileContainer.appendChild(iframe);
      } else if (file.type === 'link') {
        const linkContainer = document.createElement('div');
        linkContainer.classList.add('link-container');
        linkContainer.innerHTML = `
          <p style="margin: 0; font-weight: bold;">${file.title}</p>
          <a href="${file.content}" target="_blank">${file.content}</a>
        `;
        linkContainer.addEventListener('contextmenu', (e) => showFileContextMenu(e, file, tabId, fileIndex));
        fileContainer.appendChild(linkContainer);
      } else if (file.type === 'text') {
        const textArea = document.createElement('textarea');
        textArea.value = file.content;
        textArea.addEventListener('input', () => {
          tabsData[tabId].files[fileIndex].content = textArea.value;
          saveTabsData();
        });
        textArea.addEventListener('contextmenu', (e) => showFileContextMenu(e, file, tabId, fileIndex));
        fileContainer.appendChild(textArea);
      }

      const deleteButton = document.createElement('button');
      deleteButton.textContent = 'DELETE';
      deleteButton.style.display = 'block';
      deleteButton.style.marginTop = '-3px';
      deleteButton.style.padding = '5px 10px';
      deleteButton.style.backgroundColor = '#ff4444';
      deleteButton.style.color = 'white';
      deleteButton.style.border = 'none';
      deleteButton.style.borderRadius = '0px 0px 5px 5px';
      deleteButton.style.cursor = 'pointer';
      deleteButton.addEventListener('click', () => {
        if (confirm(`Are you sure you want to delete this ${file.type}?`)) {
          tabsData[tabId].files.splice(fileIndex, 1);
          saveTabsData();
          displayTabContent(tabId);
        }
      });
      fileContainer.appendChild(deleteButton);

      return fileContainer;
    };

    const showFileContextMenu = (e, file, tabId, fileIndex) => {
      e.preventDefault();
      contextMenu.innerHTML = '';
      contextMenu.style.left = `${e.pageX}px`;
      contextMenu.style.top = `${e.pageY}px`;
      contextMenu.style.display = 'block';

      if (file.type === 'image') {
        const fullscreenButton = document.createElement('button');
        fullscreenButton.textContent = 'Open in Fullscreen';
        fullscreenButton.addEventListener('click', () => {
          fullscreenModal.style.display = 'flex';
          fullscreenModal.innerHTML = `
            <button class="close-modal">&times;</button>
            <img src="${file.content}" style="max-width: 90%; max-height: 90%;">
          `;
          document.querySelector('.close-modal').addEventListener('click', () => {
            fullscreenModal.style.display = 'none';
          });
        });
        contextMenu.appendChild(fullscreenButton);

        const resizeButton = document.createElement('button');
        resizeButton.textContent = 'Resize Image';
        resizeButton.addEventListener('click', () => {
          currentImageTabId = tabId;
          currentImageIndex = fileIndex;
          imageWidthInput.value = '';
          resizePopup.style.display = 'block';
          contextMenu.style.display = 'none';
        });
        contextMenu.appendChild(resizeButton);
      } else if (file.type === 'pdf') {
        const fullscreenButton = document.createElement('button');
        fullscreenButton.textContent = 'Open in Fullscreen';
        fullscreenButton.addEventListener('click', () => {
          fullscreenModal.style.display = 'flex';
          fullscreenModal.innerHTML = `
            <button class="close-modal">&times;</button>
            <iframe src="${file.content}" style="max-width: 90%; max-height: 90%;"></iframe>
          `;
          document.querySelector('.close-modal').addEventListener('click', () => {
            fullscreenModal.style.display = 'none';
          });
        });
        contextMenu.appendChild(fullscreenButton);
      }

      const deleteButton = document.createElement('button');
      deleteButton.textContent = 'Delete';
      deleteButton.addEventListener('click', () => {
        if (confirm(`Are you sure you want to delete this ${file.type}?`)) {
          tabsData[tabId].files.splice(fileIndex, 1);
          saveTabsData();
          displayTabContent(tabId);
        }
        contextMenu.style.display = 'none';
      });
      contextMenu.appendChild(deleteButton);
    };

    const showTabContextMenu = (e, tabId, tabElement) => {
      e.preventDefault();
      contextMenu.style.left = `${e.pageX}px`;
      contextMenu.style.top = `${e.pageY}px`;
      contextMenu.innerHTML = '';

      const renameButton = document.createElement('button');
      renameButton.textContent = 'Rename Tab';
      renameButton.addEventListener('click', () => {
        const newName = prompt('Enter new tab name:', tabsData[tabId].name);
        if (newName) {
          tabsData[tabId].name = newName;
          saveTabsData();
          tabElement.textContent = newName;
        }
        contextMenu.style.display = 'none';
      });
      contextMenu.appendChild(renameButton);

      const closeButton = document.createElement('button');
      closeButton.textContent = 'Close Tab';
      closeButton.addEventListener('click', () => {
        if (confirm('Are you sure you want to close this tab?')) {
          delete tabsData[tabId];
          saveTabsData();
          tabElement.remove();
          if (Object.keys(tabsData).length > 0) {
            document.querySelector('.tab').click();
          } else {
            tabContent.innerHTML = '<p>Select a tab or create a new one!</p>';
          }
        }
        contextMenu.style.display = 'none';
      });
      contextMenu.appendChild(closeButton);

      contextMenu.style.display = 'block';
    };

    const createTabElement = (tabId, tabName) => {
      const tab = document.createElement('div');
      tab.classList.add('tab');
      tab.textContent = tabName;
      tab.dataset.tabId = tabId;

      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentTabIndex = Array.from(tabHeader.children).indexOf(tab) - 2;
        currentTabId = tabId;
        displayTabContent(tabId);
      });

      tab.addEventListener('contextmenu', (e) => showTabContextMenu(e, tabId, tab));
      return tab;
    };

    const displayTabContent = (tabId) => {
      const tabData = tabsData[tabId];
      if (!tabData) return;

      tabContent.innerHTML = `
        <button class="scroll-up" onclick="document.querySelector('.tab-content').scrollTo({top: 0, behavior: 'smooth'})">Scroll Up</button>
        <div>
          <button onclick="uploadFile('${tabId}', 'image')">Upload Image</button>
          <button onclick="uploadFile('${tabId}', 'pdf')">Upload PDF</button>
          <button onclick="showLinkPopup('${tabId}')">Add Link</button>
          <button onclick="addTextArea('${tabId}')">Add Text</button>
        </div>
        <div class="uploaded-files"></div>
      `;

      const uploadedFilesContainer = tabContent.querySelector('.uploaded-files');
      for (let index = tabData.files.length - 1; index >= 0; index--) {
        const file = tabData.files[index];
        const fileElement = createFileElement(file, tabId, index);
        uploadedFilesContainer.prepend(fileElement);
      }
    };

    const uploadFile = (tabId, fileType) => {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = fileType === 'image' ? 'image/*' : 'application/pdf';
      input.multiple = true;

      input.addEventListener('change', (event) => {
        const files = event.target.files;
        if (!files || files.length === 0) return;

        Array.from(files).forEach(file => {
          const reader = new FileReader();
          reader.onload = (e) => {
            const content = e.target.result;
            const newFile = { type: fileType, content, name: file.name, width: globalImageWidth };
            tabsData[tabId].files.unshift(newFile);
            saveTabsData();
            displayTabContent(tabId);
          };
          reader.onerror = () => alert(`Error reading file: ${file.name}`);
          reader.readAsDataURL(file);
        });
      });

      input.click();
    };

    const addTextArea = (tabId) => {
      const newFile = { type: 'text', content: '', name: `text-${Date.now()}` };
      tabsData[tabId].files.unshift(newFile);
      saveTabsData();
      displayTabContent(tabId);
    };

    const showLinkPopup = (tabId) => {
      currentTabId = tabId;
      linkTitleInput.value = '';
      linkUrlInput.value = '';
      linkPopup.style.display = 'block';
    };

    const saveLink = () => {
      const title = linkTitleInput.value.trim();
      const url = linkUrlInput.value.trim();
      if (!title || !url) {
        alert('Enter both a title and a URL.');
        return;
      }
      if (!url.match(/^https?:\/\//)) {
        alert('Enter a valid URL starting with http:// or https://');
        return;
      }
      const newFile = { type: 'link', content: url, name: title, title };
      tabsData[currentTabId].files.unshift(newFile);
      saveTabsData();
      displayTabContent(currentTabId);
      linkPopup.style.display = 'none';
    };

    const saveImageWidth = (applyToAll) => {
      const width = imageWidthInput.value.trim();
      if (!width || isNaN(width) || width <= 0) {
        alert('Enter a valid width in pixels.');
        return;
      }

      const widthValue = `${width}px`;
      if (applyToAll) {
        globalImageWidth = widthValue;
        localStorage.setItem('globalImageWidth', globalImageWidth);
        Object.values(tabsData).forEach(tab => {
          tab.files.forEach(file => {
            if (file.type === 'image') {
              delete file.width;
            }
          });
        });
      } else {
        tabsData[currentImageTabId].files[currentImageIndex].width = widthValue;
      }

      saveTabsData();
      displayTabContent(currentTabId);
      resizePopup.style.display = 'none';
    };

    const searchTabs = () => {
      const searchTerm = searchTabInput.value.toLowerCase();
      document.querySelectorAll('.tab').forEach(tab => {
        const tabName = tab.textContent.toLowerCase();
        tab.style.display = tabName.includes(searchTerm) ? 'block' : 'none';
      });
    };

    const showSearchPopup = () => {
      if (searchFileInput.value.trim()) {
        searchPopup.style.display = 'block';
      }
    };

    const searchFiles = () => {
      const searchTerm = searchFileInput.value.toLowerCase();
      if (!searchTerm) return;

      const scope = document.querySelector('input[name="searchScope"]:checked').value;
      searchPopup.style.display = 'none';

      let tabsToSearch = scope === 'current' 
        ? [document.querySelector('.tab.active')?.dataset.tabId]
        : Object.keys(tabsData);

      tabsToSearch = tabsToSearch.filter(tabId => tabId);

      const results = [];
      tabsToSearch.forEach(tabId => {
        const tabData = tabsData[tabId];
        tabData.files.forEach((file, index) => {
          const fileName = file.name?.toLowerCase() || '';
          const fileContent = file.type === 'text' ? file.content.toLowerCase() : '';
          if (fileName.includes(searchTerm) || fileContent.includes(searchTerm)) {
            results.unshift({ tabId, tabName: tabData.name, file, fileIndex: index });
          }
        });
      });

      tabContent.innerHTML = `
        <h3>Search Results:</h3>
        ${results.length === 0 ? '<p>No files found.</p>' : ''}
        <div class="search-results"></div>
      `;

      const resultsContainer = tabContent.querySelector('.search-results');
      results.forEach(result => {
        const resultElement = document.createElement('div');
        resultElement.style.margin = '10px';
        resultElement.innerHTML = `
          <p>Tab: ${result.tabName}</p>
        `;
        const fileElement = createFileElement(result.file, result.tabId, result.fileIndex);
        resultElement.appendChild(fileElement);
        resultsContainer.prepend(resultElement);
      });
    };

    const addTab = () => {
      const tabId = `tab-${Date.now()}`;
      const tabName = `Tab ${Object.keys(tabsData).length + 1}`;
      tabsData[tabId] = { name: tabName, files: [] };
      saveTabsData();

      const tab = createTabElement(tabId, tabName);
      const searchTabInput = tabHeader.querySelector('.search-tab');
      if (tabHeader.children.length > 1) {
        tabHeader.insertBefore(tab, tabHeader.children[1]);
      } else {
        tabHeader.insertBefore(tab, addTabButton);
      }
      tab.click();
    };

    const loadTabs = () => {
      const tabEntries = Object.entries(tabsData).reverse();
      tabEntries.forEach(([tabId, tabInfo]) => {
        const tab = createTabElement(tabId, tabInfo.name);
        const searchTabInput = tabHeader.querySelector('.search-tab');
        if (tabHeader.children.length > 1) {
          tabHeader.insertBefore(tab, tabHeader.children[1]);
        } else {
          tabHeader.insertBefore(tab, addTabButton);
        }
      });

      if (Object.keys(tabsData).length > 0) {
        document.querySelector('.tab').click();
      }
    };

    document.addEventListener('click', () => {
      contextMenu.style.display = 'none';
    });

    searchTabInput.addEventListener('input', searchTabs);
    addTabButton.addEventListener('click', addTab);
    closeModalButton.addEventListener('click', () => {
      fullscreenModal.style.display = 'none';
    });

    loadTabs();
     document.addEventListener("DOMContentLoaded", () => {
            const customMenu = document.querySelector(".custom-menu");

            document.addEventListener("contextmenu", (event) => {
                event.preventDefault();
                if (customMenu) {
                    customMenu.style.display = "block";
                    customMenu.style.top = `${event.pageY}px`;
                    customMenu.style.left = `${event.pageX}px`;
                }
            });

            document.addEventListener("click", () => {
                if (customMenu) {
                    customMenu.style.display = "none";
                }
            });
        });
  </script>
</body>
</html>
